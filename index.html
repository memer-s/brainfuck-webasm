<!DOCTYPE html>
<html>

<head>
   <meta charset="utf-8">
   <title>hello-wasm example</title>
</head>

<body>
   <script type="module">
      import init, {BF, run} from "./pkg/brainfuck.js";
      let wasm = await init();
      run()

      window.BF = BF;
      window.bf = BF.new();

      function button(id, func) {
         document.getElementById(id).addEventListener(func);
      }

      button("sp", () => {
         window.bf.step(); document.getElementById("state").innerText = bf.get_state();
      })

      button("print", () => window.bf.print())
      button("print", () => window.bf.step())
      button("print", () => window.bf.set_code(document.getElementById("code").value))
      button("print", () => window.bf.print())
      button("print", () => window.bf.print())

   </script>
   <textarea name="" id="code" cols="100" rows="10"></textarea>
   <div>
      <button id="sp">step + print</button>
      <button id="step">step</button>
      <button id="print">print</button>
      <button id="comp">compile</button>
   </div>
   <pre id="state"></pre>
   <br>
   <pre id="cout"></pre>
</body>

</html>
