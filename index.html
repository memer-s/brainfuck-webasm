<!DOCTYPE html>
<html>

<head>
   <meta charset="utf-8">
   <title>hello-wasm example</title>
</head>

<body>
   <script type="module">
      import init, {BF, run} from "./pkg/brainfuck.js";
      let wasm = await init();
      run()

      window.BF = BF;
      window.bf = BF.new();

      [
         ["sp", () => {window.bf.step(); document.getElementById("state").innerText = bf.get_state();}],
         ["print", () => window.bf.print()],
         ["step", () => window.bf.step()],
         ["comp", () => window.bf.set_code(document.getElementById("code").value)]
      ].forEach((el) => {
         document.getElementById(el[0]).addEventListener('click', el[1])
      })

   </script>
   <textarea name="" id="code" cols="100" rows="10"></textarea>
   <div>
      <button id="sp">step + print</button>
      <button id="step">step</button>
      <button id="print">print</button>
      <button id="comp">compile</button>
   </div>
   <pre id="state"></pre>
</body>

</html>
